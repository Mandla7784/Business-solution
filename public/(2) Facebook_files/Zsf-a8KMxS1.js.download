;/*FB_PKG_DELIM*/

__d("getEmojiSize",["CometComposerStylingConstants","CometLexicalEmojiNode","getResolvedShouldShrink"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.emojiSizeOverride,e=a.formattedTextStyling,f=a.textLength;a=babelHelpers.objectWithoutPropertiesLoose(a,["emojiSizeOverride","formattedTextStyling","textLength"]);if(b!=null)return b;b=f>=d("CometComposerStylingConstants").MAX_DYNAMIC_TEXT_LENGTH;f=c("getResolvedShouldShrink")(babelHelpers["extends"]({formattedTextStyling:e,textExceedsLength:b},a));return(b=e==null?void 0:e.fontSize)!=null?b:f?d("CometLexicalEmojiNode").COMPOSER_EMOJI_SIZE_SMALL:d("CometLexicalEmojiNode").COMPOSER_EMOJI_SIZE_LARGE}g["default"]=a}),98);
__d("CometComposerEmojiPluginForLexical.react",["CometLexicalEmojiNode","Lexical","LexicalText","getEmojiSize","getUpgradedCometEmojiComposerHandler","react","useCometStatusAreaTextData","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));b=h;var i=b.useLayoutEffect,j=b.useRef;function a(a){var b=a.activeAttachmentType,e=a.alwaysShrinkText,f=a.editor,g=a.emojiSizeOverride,h=a.formattedTextPreset,l=a.formattingType,m=(a=c("useCometStatusAreaTextData")(h))==null?void 0:a.formattedTextStyling,n=j((h=g)!=null?h:c("getEmojiSize")({activeAttachmentType:b,alwaysShrinkText:e,formattedTextStyling:m,formattingType:l,textLength:0})),o=j(new Set());function p(a,b){o.current.forEach(function(c){b.update(function(){var b=d("Lexical").$getNodeByKey(c);b!==null&&b.setSize(a)})}),n.current=a}i(function(){if(f!=null){var a=o.current;f.getEditorState().read(function(){d("Lexical").$nodesOfType(d("CometLexicalEmojiNode").EmojiNode).forEach(function(b){a.add(b.getKey())})});return f.registerMutationListener(d("CometLexicalEmojiNode").EmojiNode,function(b){b.forEach(function(b,c){b==="created"?a.add(c):b==="destroyed"&&a["delete"](c)})},{skipInitialization:!0})}},[f]);i(function(){if(f!=null)return k({activeAttachmentType:b,alwaysShrinkText:e,editor:f,emojiSizeOverride:g,formattedTextStyling:m,formattingType:l})},[f,b,e,m,l,g]);i(function(){f!=null&&f.update(function(){var a=f.getEditorState().read(d("LexicalText").$rootTextContent).length;a=c("getEmojiSize")({activeAttachmentType:b,alwaysShrinkText:e,emojiSizeOverride:g,formattedTextStyling:m,formattingType:l,textLength:a});n.current!==a&&p(a,f)})},[f,b,e,m,l,g]);i(function(){if(f!=null)return f.registerTextContentListener(function(a){a=c("getEmojiSize")({activeAttachmentType:b,alwaysShrinkText:e,emojiSizeOverride:g,formattedTextStyling:m,formattingType:l,textLength:a.length});n.current!==a&&p(a,f)})},[f,b,e,m,l,g])}a.displayName=a.name+" [from "+f.id+"]";function k(a){var b=a.editor,d=a.emojiSizeOverride,e=babelHelpers.objectWithoutPropertiesLoose(a,["editor","emojiSizeOverride"]),f=function(){},g=b.registerTextContentListener(function(a){a=c("getEmojiSize")(babelHelpers["extends"]({emojiSizeOverride:d,textLength:a.length},e));f();f=c("getUpgradedCometEmojiComposerHandler")(b,a)});return function(){f(),g()}}e=c("withComposerViewStatePart")(a,function(a){var b;return{activeAttachmentType:(b=a.attachmentArea)==null?void 0:b.activeAttachmentType,editor:a.lexicalEditor,emojiSizeOverride:a.emojiSizeOverride,formattedTextPreset:(b=a.formattedText)==null?void 0:b.currentFormattedTextPreset,formattingType:a.formattingType}});g["default"]=e}),98);
__d("CometComposerHashtagPluginForLexical.react",["react","requireDeferred","useDeferredModuleOnReady","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useEffect,j=c("requireDeferred")("getUpgradedCometHashtagComposerHandler").__setRef("CometComposerHashtagPluginForLexical.react");function a(a){var b=a.editor,d=c("useDeferredModuleOnReady")(j);i(function(){if(b!=null&&d!=null)return d(b)},[b,d])}a.displayName=a.name+" [from "+f.id+"]";b=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=b}),98);
__d("FeedComposerCometHashtagTypeheadListItem.react",["CometSearchMentionsBaseViewItem.react","FDSTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var d=b.label,e=b.rawData.subtext;return i.jsx(c("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},a,{entry:b,children:i.jsx("div",babelHelpers["extends"]({className:"x1y1aw1k x1sxyh0 xwib8y2 xurb0ha x168biu4"},{children:i.jsx(c("FDSTextPairing.react"),{headline:d,level:4,meta:e})}))}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometHashtagsLexicalCreateNodeStrategy",["CometLexicalGenericEntityNode","cometBaseMentionsLexicalCreateNodeStrategy","cometMentionsDataEntryText"],(function(a,b,c,d,e,f,g){"use strict";a=c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){return d("CometLexicalGenericEntityNode").$createCometLexicalGenericEntityNode({id:a.key,text:c("cometMentionsDataEntryText")(a),type:"Hashtag"})});b=a;g["default"]=b}),98);
__d("getHashtagRegexForTypeahead",["getHashtagRegexString"],(function(a,b,c,d,e,f,g){function a(){return new RegExp(c("getHashtagRegexString")()+"$","i")}g["default"]=a}),98);
__d("createCometHashtagMatchStrategy",["getHashtagRegexForTypeahead"],(function(a,b,c,d,e,f,g){"use strict";var h=["#","\\uFF03"];function a(a){var b=a.minMatchLength;return{findMentionableString:function(a){if(h.includes(a))return{leadOffset:0,matchingString:a,replaceableString:a};var d=new RegExp(c("getHashtagRegexForTypeahead")());d=d.exec(a);if(d!==null){a=d[1].length;d=d[0].substring(a);if(d!=null&&d.length>=b)return{leadOffset:a,matchingString:d,replaceableString:d}}return null},name:"HashtagMatchStrategy("+b.toString()+")"}}g["default"]=a}),98);
__d("createFeedComposerCometHashtagDataEntry_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"context"},{kind:"RootArgument",name:"scopeID"}],kind:"Fragment",metadata:{mask:!1},name:"createFeedComposerCometHashtagDataEntry_data",selections:[{alias:null,args:null,concreteType:"Hashtag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Variable",name:"callsite",variableName:"context"},{kind:"Variable",name:"scope_id",variableName:"scopeID"}],kind:"ScalarField",name:"typeahead_snippets",storageKey:null}],storageKey:null}],type:"TypeaheadHashtagResultV2",abstractKey:null};e.exports=a}),null);
__d("createFeedComposerCometHashtagDataEntry",["createFeedComposerCometHashtagDataEntry_data.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;h!==void 0?h:h=b("createFeedComposerCometHashtagDataEntry_data.graphql");function a(a){a=a==null?void 0:a.node;if(a==null)return null;var b=a.id,c=a.name;a=a.typeahead_snippets;a=a!=null&&a.length>=1?a[0]:null;return b==null||c==null?null:{key:b,label:c,rawData:{id:b,name:c,subtext:a},type:"entry"}}g["default"]=a}),98);
__d("useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6694436457246277"}),null);
__d("useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql",["useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"context"},c={defaultValue:!1,kind:"LocalArgument",name:"includeImageUrls"},d={defaultValue:!1,kind:"LocalArgument",name:"includeMetatext"},e={defaultValue:null,kind:"LocalArgument",name:"limit"},f={defaultValue:null,kind:"LocalArgument",name:"query"},g={defaultValue:null,kind:"LocalArgument",name:"scopeID"},h={defaultValue:null,kind:"LocalArgument",name:"sessionID"},i={kind:"Variable",name:"scope_id",variableName:"scopeID"};i=[{alias:null,args:[{fields:[{kind:"Variable",name:"context",variableName:"context"},{kind:"Variable",name:"include_image_urls",variableName:"includeImageUrls"},{kind:"Variable",name:"include_metatext",variableName:"includeMetatext"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"query",variableName:"query"},i,{kind:"Variable",name:"session_id",variableName:"sessionID"}],kind:"ObjectValue",name:"argument"}],concreteType:"TypeaheadHashtagResultV2",kind:"LinkedField",name:"hashtag_typeahead_v2",plural:!0,selections:[{alias:null,args:null,concreteType:"Hashtag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Variable",name:"callsite",variableName:"context"},i],kind:"ScalarField",name:"typeahead_snippets",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d,e,f,g,h],kind:"Fragment",metadata:null,name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",selections:i,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[f,h,e,a,c,d,g],kind:"Operation",name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",selections:i},params:{id:b("useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation"),metadata:{},name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useFeedComposerCometHashtagTypeaheadDataSource",["createFeedComposerCometHashtagDataEntry","useCometTypeaheadGraphQLDataSource","useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql");function a(a){var b=a.context,d=a.includeMetatext,e=a.limit,f=a.scopeID,g="";return c("useCometTypeaheadGraphQLDataSource")({gqlQuery:i,limit:e,normalize:j,queryVariablesBuilderFunction:function(a){a=a.query;return{context:b,includeMetatext:d,limit:e,query:a,scopeID:f,sessionID:g}}})}function j(a){a=a==null?void 0:a.hashtag_typeahead_v2;return a==null?[]:a.map(function(a){if(a==null)return;return c("createFeedComposerCometHashtagDataEntry")(a)}).filter(Boolean)}g["default"]=a}),98);
__d("useFeedComposerCometHashtagsDataSourceResolverConfig",["createCometHashtagMatchStrategy","react","useCometMentionsDataSourceResolverConfig","useCometTypeaheadCompositeDataSource","useFeedComposerCometHashtagTypeaheadDataSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a){var b=a.context,d=a.includeMetatext,e=a.limit,f=a.payloadDecorators;a=a.scopeID;var g=c("useCometTypeaheadCompositeDataSource")({limit:e,networkDataSource:c("useFeedComposerCometHashtagTypeaheadDataSource")({context:b,includeMetatext:d,limit:e,scopeID:a}),payloadDecorators:(b=f)!=null?b:[]});d=i(function(){return[{dataSource:g,matchStrategy:c("createCometHashtagMatchStrategy")({minMatchLength:0})}]},[g]);return c("useCometMentionsDataSourceResolverConfig")(d,!0)}g["default"]=a}),98);
__d("CometComposerHashtagTypeaheadPluginForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","FeedComposerCometHashtagTypeheadListItem.react","cometHashtagsLexicalCreateNodeStrategy","cr:2971","react","useCometTypeaheadViewListStrategy","useFeedComposerCometHashtagsDataSourceResolverConfig","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.editor;a=babelHelpers.objectWithoutPropertiesLoose(a,["editor"]);return b==null?null:i.jsx(j,babelHelpers["extends"]({},a,{editor:b}))}a.displayName=a.name+" [from "+f.id+"]";function j(a){var d=a.editor;a=a.groupID;var e=a==null?"MAIN_COMPOSER":"GROUP_COMPOSER";a=a;var f=!0;e=c("useFeedComposerCometHashtagsDataSourceResolverConfig")({context:e,includeMetatext:f,limit:6,payloadDecorators:b("cr:2971")!=null?[b("cr:2971")({limit:1})]:void 0,scopeID:a});f=c("useCometTypeaheadViewListStrategy")({viewItemStrategyRenderer:c("FeedComposerCometHashtagTypeheadListItem.react")});return i.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("cometHashtagsLexicalCreateNodeStrategy"),dataSourceResolverConfig:e,editor:d,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),viewStrategyRenderer:f})}j.displayName=j.name+" [from "+f.id+"]";e=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=e}),98);
__d("CometComposerIsDirtyPluginForLexical.react",["LexicalText","composerLexicalEditorViewStateReducer","react","useComposerViewStateDispatcher","useComposerViewStateReducer","vulture","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useEffect;function a(a){var b=a.editor,e=a.lexicalIsDirty;c("vulture")("3zv6k1QOTCl");c("useComposerViewStateReducer")(c("composerLexicalEditorViewStateReducer"));var f=c("useComposerViewStateDispatcher")();i(function(){if(b!=null){var a=b.getEditorState().read(d("LexicalText").$rootTextContent).length>0;a===!0&&a!==e&&f({isDirty:!0,type:"SET_LEXICAL_DIRTY_STATE"});return b.registerTextContentListener(function(b){b=b.length>0;b!==a&&f({isDirty:b,type:"SET_LEXICAL_DIRTY_STATE"})})}},[f,b,e])}a.displayName=a.name+" [from "+f.id+"]";b=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor,lexicalIsDirty:a.lexicalEditorIsDirty}});g["default"]=b}),98);
__d("URLMatchUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=/^(([\w-]+\.)+(xn--[\w-]+|\w+)|\[([\da-f]{0,4}:)*(?:[\da-f]{1,4}|(?:(?:\d{1,3}\.){3}\d{1,3}))\])(:[0-9]+)?([/\?].*)?$/;return a.match(b)!==null}function b(a){return a.trim().replace(/(^\w+:|^)\/\//,"").replace(/^www\./,"").replace(/\/*$/,"").toLowerCase()}f.isURL=a;f.canonicalizeURL=b}),66);
__d("composerLinkAttachmentChecker",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c,d;c=a==null?void 0:(c=a.attachmentArea)==null?void 0:c.activeAttachmentType;d=b==null?void 0:(d=b.attachmentArea)==null?void 0:d.activeAttachmentType;a=a==null?void 0:a.linkAttachment;b=b==null?void 0:b.linkAttachment;if(c!=null&&d==null||a!=null&&b==null)return"DELETED";else if((d==="LINK"||d==="SHARE")&&(a==null?void 0:a.url)!==(b==null?void 0:b.url))return"UPDATED";return"UNCHANGED"}f["default"]=a}),66);
__d("composerLinkAttachmentReducer",["composerAttachmentAreaReducer","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c;if(((c=a.attachmentArea)==null?void 0:c.activeAttachmentType)==="FORMATTED_TEXT"||((c=a.attachmentArea)==null?void 0:c.activeAttachmentType)==="SHARE")return a;var d=b.url;c=[].concat(((b=(c=a.linkAttachment)==null?void 0:c.urlStack)!=null?b:[]).filter(function(a){return!a.startsWith(d)&&!d.startsWith(a)}),[d]);var e=(b=a.linkAttachment)==null?void 0:b.selectedLinkPreview;e!=null&&(c=c.filter(function(a){return a!==e}).concat(e));return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{url:c[c.length-1],urlStack:c})})}function i(a,b){var c,d;c=(c=(c=a.linkAttachment)==null?void 0:c.urlStack)!=null?c:[];var e=c[c.length-1];d=((d=(d=a.linkAttachment)==null?void 0:d.removedAttachmentPreviewUrls)!=null?d:new Set()).add(e);if(c.length<=1){b.onRemovedLast(!0);return babelHelpers["extends"]({},a,{attachmentArea:{activeAttachmentType:void 0,previousAttachmentType:"LINK"},linkAttachment:{isLinkAttachmentEnabled:(e=a.linkAttachment)==null?void 0:e.isLinkAttachmentEnabled,removedAttachmentPreviewUrls:d}})}e=c.slice(0,-1);c=e[e.length-1];b.onRemovedLast(!1);return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{removedAttachmentPreviewUrls:d,selectedLinkPreview:void 0,url:c,urlStack:e})})}function j(a){return babelHelpers["extends"]({},a,{attachmentArea:{activeAttachmentType:void 0,previousAttachmentType:"LINK"},linkAttachment:{isLinkAttachmentEnabled:(a=a.linkAttachment)==null?void 0:a.isLinkAttachmentEnabled}})}function k(a,b){var c;if(a.useOriginalContentLinkAttachment===!0)return babelHelpers["extends"]({},a,{originalContentLinkAttachment:babelHelpers["extends"]({},a.originalContentLinkAttachment,{linkPreview:{share_scrape_data:b.shareScrapeData},url:b.url})});else if(((c=a.linkAttachment)==null?void 0:c.url)!==b.url)return a;return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{linkPreview:{share_scrape_data:b.shareScrapeData},url:b.url})})}function l(a,b){return babelHelpers["extends"]({},a,{useOriginalContentLinkAttachment:b.useOriginalContentLinkAttachment})}function m(a,b){var c;c=((c=(c=a.linkAttachment)==null?void 0:c.urlStack)!=null?c:[]).filter(function(a){return a!==b.selectedLinkPreview}).concat(b.selectedLinkPreview);return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{selectedLinkPreview:b.selectedLinkPreview,url:b.selectedLinkPreview,urlStack:c})})}function n(a,b){var c,d=a.linkAttachment;c=(c=d==null?void 0:d.customAttachments)!=null?c:[];c=c[0].throwback_card;return d==null||c==null?a:babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},d,{customAttachments:[{throwback_card:babelHelpers["extends"]({},c,{media_ids:b.mediaIds})}]})})}function a(a,b){switch(b.type){case"ADD_LINK_URL":return h(a,b);case"REMOVE_LINK_URL":return i(a,b);case"REMOVE_ATTACHMENT_TYPE":var e=d("composerAttachmentAreaReducer").getCanAlterAttachmentData(b,"LINK",a);if(e)return i(a,{onRemovedLast:c("emptyFunction"),type:"REMOVE_LINK_URL"});else return a;case"REMOVE_ALL_LINKS":return j(a);case"SET_LINK_PREVIEW":return k(a,b);case"SET_USE_ORIGINAL_CONTENT":return l(a,b);case"SET_SELECTED_LINK_PREVIEW":return m(a,b);case"SET_THROWBACK_MEDIA":return n(a,b)}return a}g["default"]=a}),98);
__d("CometComposerLinksPluginForLexical.react",["CometDebounce","ConstUriUtils","Lexical","LexicalLink","LexicalUtils","Promise","URLMatchUtils","URLMatcher","composerLinkAttachmentChecker","composerLinkAttachmentReducer","gkx","react","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i||(i=d("react"));e=i;var j=e.useCallback,k=e.useEffect,l=/[,;\s]/;function m(a){return c("gkx")("8925")?l.test(a):a===" "}function n(a){return a[a.length-1]}function o(a){return c("URLMatcher").match(a)}function p(a){if(c("gkx")("8926"))return d("ConstUriUtils").isValidUri(a);else return d("URLMatchUtils").isURL(d("URLMatchUtils").canonicalizeURL(a))&&d("ConstUriUtils").isValidUri(a)}function q(a,b){var c=b,d="";while(c>0&&!m(a[c-1]))d=a[c-1]+d,c--;b=b;while(b<a.length&&!m(a[b]))d+=a[b],b++;return{text:d,textOffset:c}}function r(a,b){b=a.getKey();var c=a.getTextContent(),e=d("Lexical").$getSelection(),f=d("Lexical").$getEditor().getEditorState();f=f.read(function(){var b=d("Lexical").$getNodeByKey(a.getKey()),c=null;d("Lexical").$isTextNode(b)&&b.isSimpleText()&&(c=b.getTextContent());return[c,d("Lexical").$getSelection()]});var g=f[0];f=f[1];if(g===null||!d("Lexical").$isRangeSelection(f)||!f.isCollapsed()||f.anchor.key!==b||!d("Lexical").$isRangeSelection(e)||!e.isCollapsed()||e.anchor.key!==b)return null;b=c.length;var h=g.length;e=e.anchor.offset;f=f.anchor.offset;var i=e===f+1&&b===h+1&&c.substring(0,e-1)+c.substring(e)===g,j=e+1===f&&b+1===h&&c===g.substring(0,e)+g.substring(e+1);f=e===f&&b+1===h&&c===g.substring(0,e)+g.substring(0,e+1);if(i||j||f)return q(c,e);else return null}function s(a){return d("Lexical").$getEditor().getEditorState().read(function(){var b=d("Lexical").$getNodeByKey(a);return d("Lexical").$isTextNode(b)&&b.isSimpleText()?b.getTextContent():null})}function t(a,b){var c=a.getTextContent();b=(b=b==null?void 0:b.text)!=null?b:s(a.getKey());if(b===null)return null;a=c.length;var d=b.length,e=0;while(e<a&&e<d&&c[e]===b[e])e++;a=a;d=d;while(a>e&&d>e&&c[a-1]===b[a-1])a--,d--;a++;d=c.substring(e,a);while(e-1>=0&&!m(c[e-1]))e--,d=c[e]+d;while(a+1<c.length&&!m(c[a+1]))a++,d+=c[a+1];return{text:d,textOffset:e}}function u(a,b){return a.getTextContent()===((b=b==null?void 0:b.text)!=null?b:s(a.getKey()))?{text:"",textOffset:0}:null}function v(a,b,d,e,f){var g=a.getTextContent();g=g;var h=0;if(c("gkx")("8927")&&!e){e=(e=(e=u(a,b))!=null?e:r(a,b))!=null?e:t(a,b);if(e!==null){g=e.text;h=e.textOffset;if(g.split(l).some(function(a){return a.length>100})){b=h+g.length;e={textOffsetEnd:b,textOffsetStart:h};b=d.get(a.getKey());b!=null&&(e.textOffsetStart=Math.min(e.textOffsetStart,b.textOffsetStart),e.textOffsetEnd=Math.max(e.textOffsetEnd,b.textOffsetEnd));d.set(a.getKey(),e);return}}}w(a,g,h,f)}function w(a,b,c,e){var f=a.getTextContent(),g=f.length;b=b;var h=0;c=c;var i=a,j=0,k;while((k=o(b))!=null&&k!=null){c+=b.indexOf(k);var l=h+c,q=k.length,r=void 0;if(l>0)r=m(f[l-1]);else{var s=a.getPreviousSibling();d("Lexical").$isElementNode(s)&&(s=s.getLastDescendant());s===null?r=!0:r=d("Lexical").$isLineBreakNode(s)||d("Lexical").$isTextNode(s)&&m(n(s.getTextContent()))}if(l+q<g)s=m(f[l+q]);else{l=a.getNextSibling();d("Lexical").$isElementNode(l)&&(l=l.getFirstDescendant());if(l===null)s=!0;else{s=d("Lexical").$isLineBreakNode(l)||d("Lexical").$isTextNode(l)&&m((l=l.getTextContent()[0])!=null?l:"")}}if(r&&s&&p(k)){l=void 0;if(c===0){r=i.splitText(q);l=r[0];i=r[1]}else{s=i.splitText(c+j,c+q+j);l=s[1];i=s[2]}r=d("LexicalLink").$createAutoLinkNode(k);r.append(d("Lexical").$createTextNode(k));l.replace(r);e(r);j=0}else j=c+q;s=c+q;b=b.substring(s);h+=s;c=0}}function x(a){var b=a.getChildren(),e=b.length;for(var f=0;f<e;f++){var g=b[f];if(!d("Lexical").$isTextNode(g)||!g.isSimpleText()){z(a);return}}g=a.getTextContent();b=c("URLMatcher").match;if(b(g)!==g||!p(g)){z(a);return}e=a.getPreviousSibling();d("Lexical").$isElementNode(e)&&(e=e.getLastDescendant());if(e!==null&&!(d("Lexical").$isLineBreakNode(e)||d("Lexical").$isTextNode(e)&&m(n(e.getTextContent())))){z(a);return}f=a.getNextSibling();d("Lexical").$isElementNode(f)&&(f=f.getFirstDescendant());if(f!==null&&!(d("Lexical").$isLineBreakNode(f)||d("Lexical").$isTextNode(f)&&m(f.getTextContent()[0]))){z(a);return}b=a.getURL();b!==g&&a.setURL(g)}function y(a){var b=a.getPreviousSibling(),c=a.getNextSibling();a=a.getTextContent();d("LexicalLink").$isAutoLinkNode(b)&&!d("Lexical").$isLineBreakNode(b)&&!m(a[0])&&z(b);d("LexicalLink").$isAutoLinkNode(c)&&!d("Lexical").$isLineBreakNode(c)&&!m(n(a))&&z(c)}function z(a){var b=a.getChildren(),c=b.length;for(c=c-1;c>=0;c--)a.insertAfter(b[c]);a.remove();return b.map(function(a){return a.getLatest()})}function a(a){var e=a.editor,f=a.isLinkAttachmentEnabled,g=a.removedAttachmentPreviewUrls;c("useComposerViewStateReducer")(c("composerLinkAttachmentReducer"),c("composerLinkAttachmentChecker"));var i=c("useComposerViewStateDispatcher")(),l=j(function(a,c){if((g==null?void 0:g.has(a))&&c!==!0)return;i({type:"ADD_LINK_URL",url:a});(f||c===!0)&&i({attachmentType:"LINK",onRemove:function(a){return new(h||(h=b("Promise")))(function(b){a({onRemovedLast:b,type:"REMOVE_LINK_URL"})})},type:"ACTIVATE_ATTACHMENT_TYPE"})},[i,f,g]);k(function(){if(e!=null){var a=function(a){var c=a.getParentOrThrow();if(d("LexicalLink").$isAutoLinkNode(c)){x(c);c=c.getLatest();j(c)}else a.isSimpleText()&&v(a,f,b,h(),j),y(a)},b=new Map(),f=null,g=e.getEditorState(),h=function(){return e.getEditorState()===g},i=c("CometDebounce")(function(a,b){l(a.__url,b)},{wait:1e3}),j=function(a){return c("gkx")("8927")?i(a,!1):l(a.__url,!1)},k=function(a){return c("gkx")("8927")?i(a,!0):l(a.__url,!0)},m=c("CometDebounce")(function(){var a=function(){if(f){if(g>=c.length)return"break";h=c[g++]}else{g=c.next();if(g.done)return"break";h=g.value}var a=h,b=a[0];i=a[1];var k=i.textOffsetEnd,l=i.textOffsetStart;e.update(function(){var a=d("Lexical").$getNodeByKey(b);if(d("Lexical").$isTextNode(a)&&a.isSimpleText()){var c=a.getTextContent().substring(l,k);w(a,c,l,j)}})};for(var c=b.entries(),f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h,i,k=a();if(k==="break")break}},{wait:200});return d("LexicalUtils").mergeRegister(e.registerUpdateListener(function(){m()}),e.registerMutationListener(d("LexicalLink").AutoLinkNode,function(a){var b=new WeakSet();e.getEditorState().read(function(){var c=function(){if(g){if(h>=f.length)return"break";i=f[h++]}else{h=f.next();if(h.done)return"break";i=h.value}var a=i,c=a[0];a=a[1];var j=e.getElementByKey(c);(a==="created"||a==="updated")&&j!==null&&!b.has(j)&&(b.add(j),j.addEventListener("click",function(a){e.getEditorState().read(function(){var a=d("Lexical").$getNodeByKey(c);a!=null&&k(a)})}))};for(var f=a,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i,j=c();if(j==="break")break}})},{skipInitialization:!0}),e.registerNodeTransform(d("Lexical").RootNode,function(){if(c("gkx")("8927")){var b=e._compositionKey;if(b!==null){if(f===null)f={key:b,text:s(b)};else if(f.key!==b){var g=d("Lexical").$getNodeByKey(f.key);d("Lexical").$isTextNode(g)&&g.isAttached()&&a(g);f={key:b,text:s(b)}}}else if(f!==null){g=d("Lexical").$getNodeByKey(f.key);d("Lexical").$isTextNode(g)&&g.isAttached()&&a(g);f=null}}}),e.registerNodeTransform(d("Lexical").TextNode,function(b){a(b)}),e.registerNodeTransform(d("LexicalLink").AutoLinkNode,function(a){x(a);a=a.getLatest();j(a)}),function(){i.reset(),m.reset()})}},[l,e,f])}a.displayName=a.name+" [from "+f.id+"]";e=c("withComposerViewStatePart")(a,function(a){var b;return{editor:a.lexicalEditor,isLinkAttachmentEnabled:(b=(b=a.linkAttachment)==null?void 0:b.isLinkAttachmentEnabled)!=null?b:!0,removedAttachmentPreviewUrls:(b=a.linkAttachment)==null?void 0:b.removedAttachmentPreviewUrls}});g.segment=q;g.$handleLinkCreationOnKeyboardInput=r;g.$getPreviousNodeTextForSimpleTextNode=s;g.$handleLinkCreationOnSingleDiff=t;g.$handleLinkCreationOnNoDiff=u;g.CometComposerLinksPlugin=e}),98);
__d("CometComposerLinksPluginForLexicalWithDefaultExport.react",["CometComposerLinksPluginForLexical.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("CometComposerLinksPluginForLexical.react").CometComposerLinksPlugin}),98);
__d("getInitialComposerLinkData",["Lexical","LexicalLink"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a!=null){var b=new Map();a.getEditorState().read(function(){return d("Lexical").$nodesOfType(d("LexicalLink").AutoLinkNode).forEach(function(a){return b.set(a.getKey(),a.getTextContent())})});return b}return new Map()}g["default"]=a}),98);
__d("handlePendingMisinformationOnComposerSubmit",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){for(var d=0;d<a.length;d++){var e=b[a[d]];if(e==null)continue;e=e.status;switch(e){case"ACCEPTED":case"CLEAN":case"FAILED":break;case"DECISION_DEFERRED":var f=[].concat(c.current);c.current.length=0;f.forEach(function(a){a=a.onHalt;a()});return;case"DIRTY_AWAITING_DECISION":case"FETCHING":return;default:return e}}f=[].concat(c.current);c.current.length=0;f.forEach(function(a){a=a.onContinue;a()})}f["default"]=a}),66);
__d("hasNoLinksToAnalyze",["Lexical","LexicalLink"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f;a=Array.from(a);if(c!=null){var g=new Set([]);c==null?void 0:c.getEditorState().read(function(){return d("Lexical").$nodesOfType(d("LexicalLink").AutoLinkNode).forEach(function(a){return g.add(a.getURL())})});e!=null&&g.add(e);f=a.filter(function(a){return g.has(a)})}return((c=f)!=null?c:a).every(function(a){a=b[a];if(a==null)return!0;a=a.status;switch(a){case"ACCEPTED":case"CLEAN":case"FAILED":return!0;case"DECISION_DEFERRED":case"DIRTY_AWAITING_DECISION":case"FETCHING":return!1;default:return a}})}g["default"]=a}),98);
__d("onCloseConfirmationDialog",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){switch(c){case"ACCEPTED":a({__type:"ACCEPT_URL",url:b});break;case"NO_DECISION":a({__type:"ENTER_COOLDOWN_PERIOD"});break;default:return c}}f["default"]=a}),66);
__d("maybeTriggerMisinformationDialog",["onCloseConfirmationDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=a.composedURLs,e=a.composerPhase,f=a.composerType,g=a.dialogIsOpen,h=a.dispatch,i=a.misinformationRecords,j=b.onCloseDialog;a=b.onTriggerDialog;b=b.openConfirmationDialog;if(g.current===!0)return;var k=Array.from(d).find(function(a){return((a=i[a])==null?void 0:a.status)==="DIRTY_AWAITING_DECISION"});if(k!=null){g=i[k];if(g==null)return;d=g.confirmationRenderer;if(d==null)return;a();b({composerPhase:e,composerType:f,confirmationRenderer:d},function(a){j(),c("onCloseConfirmationDialog")(h,k,a)})}}g["default"]=a}),98);
__d("cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6541317025960799"}),null);
__d("cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql",["cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],c=[{kind:"Variable",name:"params",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],f={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g=[f];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",selections:[{alias:null,args:c,concreteType:"LinkPreviewRoot",kind:"LinkedField",name:"link_preview",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"composer_post_confirmation_renderer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMisinformationLinkComposerConfirmationDialog_confirmationRenderer"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",selections:[{alias:null,args:c,concreteType:"LinkPreviewRoot",kind:"LinkedField",name:"link_preview",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"composer_post_confirmation_renderer",plural:!1,selections:[d,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"cid",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_for_comet",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"description_for_comet",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"ManualFactCheck",kind:"LinkedField",name:"fact_checks",plural:!0,selections:[f,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"FactCheckProvider",kind:"LinkedField",name:"provider",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},f],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"external_uri",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachment_thumbnail",plural:!1,selections:[d,{alias:null,args:[{kind:"Literal",name:"height",value:60},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:g,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:g,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:g,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:g,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:g,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_page_admin_warning",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_rating_badge",storageKey:null}],type:"MisinformationComposerPostConfirmationRenderer",abstractKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation"),metadata:{},name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("cometMisinformationLinkDetectorPluginInternalStateReducer",["CometRelay","FBLogger","WebPixelRatio","cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql");function j(a,b){return l(a,b,"ADD")}function k(a,b){return l(a,b,"REMOVE")}function l(a,b,c){if(a.composedURLs.has(b)===(c==="ADD"))return a;var d=new Set(a.composedURLs);c==="ADD"?d.add(b):d["delete"](b);return babelHelpers["extends"]({},a,{composedURLs:d})}function m(a,b,d){var e=a.misinformationRecords[b];if(e==null){c("FBLogger")("misinformation").mustfix("Tried to update a misinformation record for a URL that was not being tracked.");return a}var f=Object.entries(d).find(function(a){var b=a[0];a=a[1];return e[b]!==a});return f===!1?a:babelHelpers["extends"]({},a,{misinformationRecords:babelHelpers["extends"]({},a.misinformationRecords,(f={},f[b]=babelHelpers["extends"]({},e,d),f))})}function a(a,b){switch(b.__type){case"ACCEPT_URL":return m(a,b.url,{status:"ACCEPTED"});case"ENTER_COOLDOWN_PERIOD":return Object.keys(a.misinformationRecords).reduce(function(b,c){var d;d=(d=b.misinformationRecords[c])==null?void 0:d.status;if(d==null)return b;switch(d){case"ACCEPTED":case"CLEAN":case"DECISION_DEFERRED":case"FAILED":case"FETCHING":return a;case"DIRTY_AWAITING_DECISION":return m(b,c,{status:"DECISION_DEFERRED"});default:return d}},a);case"EXIT_COOLDOWN_PERIOD":return Object.keys(a.misinformationRecords).reduce(function(b,c){var d;d=(d=b.misinformationRecords[c])==null?void 0:d.status;if(d==null)return b;switch(d){case"ACCEPTED":case"CLEAN":case"DIRTY_AWAITING_DECISION":case"FAILED":case"FETCHING":return a;case"DECISION_DEFERRED":return m(b,c,{status:"DIRTY_AWAITING_DECISION"});default:return d}},a);case"MARK_URL_FAILED_DETECTION":return m(a,b.url,{status:"FAILED"});case"SET_DETECTION_RESULT":return m(a,b.url,{confirmationRenderer:b.confirmationRenderer,status:b.confirmationRenderer!=null?"DIRTY_AWAITING_DECISION":"CLEAN"});case"TRACK_COMPOSED_URL":if(a.misinformationRecords[b.url]!=null)return j(a,b.url);var c,e,f={confirmationRenderer:void 0,dispose:function(){c&&(c.unsubscribe(),c=null),e&&(e.dispose(),e=null)},status:"FETCHING"},g={input:{url:b.url},scale:d("WebPixelRatio").get()},h=d("relay-runtime").getRequest(i);h=d("relay-runtime").createOperationDescriptor(h,g);e=a.environment.retain(h);var l=!0;c=d("CometRelay").fetchQuery(a.environment,i,g).subscribe({error:function(){b.dispatch({__type:"MARK_URL_FAILED_DETECTION",url:b.url})},next:function(a){a=(a=a.link_preview)==null?void 0:a.composer_post_confirmation_renderer;l?f.confirmationRenderer=a:b.dispatch({__type:"SET_DETECTION_RESULT",confirmationRenderer:a,url:b.url})}});l=!1;return babelHelpers["extends"]({},j(a,b.url),{misinformationRecords:babelHelpers["extends"]({},a.misinformationRecords,(h={},h[b.url]=f,h))});case"UNTRACK_COMPOSED_URL":return k(a,b.url);default:return b.__type}}g["default"]=a}),98);
__d("useMisinformationState",["CometRelay","cometMisinformationLinkDetectorPluginInternalStateReducer","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useMemo,j=b.useReducer,k=b.useState;function a(a){var b=d("CometRelay").useRelayEnvironment(),e=i(function(){return{composedURLs:new Set(a==null?void 0:a.values()),environment:b,misinformationRecords:{}}},[b,a]);e=j(c("cometMisinformationLinkDetectorPluginInternalStateReducer"),e);var f=e[0],g=f.composedURLs;f=f.misinformationRecords;e=e[1];var h=k("COMPOSING"),l=h[0];h=h[1];return{composedURLs:g,composerPhase:l,dispatch:e,misinformationRecords:f,setComposerPhase:h}}g["default"]=a}),98);
__d("CometComposerMisinformationLinkDetectorPluginForLexical.react",["JSResourceForInteraction","Lexical","LexicalLink","getInitialComposerLinkData","handlePendingMisinformationOnComposerSubmit","hasNoLinksToAnalyze","maybeTriggerMisinformationDialog","react","useCometLazyDialog","useComposerPreSubmitHook","useMisinformationState","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));b=h;var i=b.useCallback,j=b.useEffect,k=b.useMemo,l=b.useRef,m=c("JSResourceForInteraction")("CometMisinformationLinkComposerConfirmationDialog.react").__setRef("CometComposerMisinformationLinkDetectorPluginForLexical.react");function a(a){var b=a.composerType,e=a.editor,f=a.linkAttachment;a=k(function(){return c("getInitialComposerLinkData")(e)},[e]);var g=c("useMisinformationState")(a),h=g.composedURLs,n=g.composerPhase,o=g.dispatch,p=g.misinformationRecords,q=g.setComposerPhase,r=l(a),s=l(null);g=c("useCometLazyDialog")(m);var t=g[0],u=l(!1),v=i(function(a,b){b=b.getEditorState().read(function(){return a.getTextContent()});var c=r.current;c.has(a.getKey())||c.set(a.getKey(),b);h.has(b)||o({__type:"TRACK_COMPOSED_URL",dispatch:o,url:b})},[h,o]),w=i(function(a){var b=r.current,c=b.get(a);c!=null&&(f==null?void 0:f.url)!==c&&o({__type:"UNTRACK_COMPOSED_URL",url:c});b["delete"](a)},[o,f==null?void 0:f.url]);j(function(){var a=f==null?void 0:f.url;a!=null&&(h.has(a)||o({__type:"TRACK_COMPOSED_URL",dispatch:o,url:a}))},[h,o,f]);j(function(){if(b==="share")return;s.current=p;var a=function(){u.current=!0},d=function(){u.current=!1};c("maybeTriggerMisinformationDialog")({composedURLs:h,composerPhase:n,composerType:b,dialogIsOpen:u,dispatch:o,misinformationRecords:p},{onCloseDialog:d,onTriggerDialog:a,openConfirmationDialog:t})},[h,n,b,o,p,t]);var x=l([]);j(function(){var a=Array.from(h);c("handlePendingMisinformationOnComposerSubmit")(a,p,x)},[h,p]);function y(a){var b=a.onContinue,d=a.onHalt;q("COMMITTING");x.current.push({onContinue:function(){q("COMPOSING"),b()},onHalt:function(){q("COMPOSING"),d()}});a=c("hasNoLinksToAnalyze")(h,p,e,f==null?void 0:f.url);if(a){a=[].concat(x.current);x.current.length=0;a.forEach(function(a){a=a.onContinue;a()})}else o({__type:"EXIT_COOLDOWN_PERIOD"})}c("useComposerPreSubmitHook")(y);j(function(){return function(){var a=s.current;a!==null&&Object.keys(a).forEach(function(b){b=a[b];b!=null&&b.dispose()})}},[]);j(function(){if(e!=null)return e.registerMutationListener(d("LexicalLink").AutoLinkNode,function(a){var b=e.getEditorState();a.forEach(function(a,c){var f=b.read(function(){return d("Lexical").$getNodeByKey(c)});a==="created"&&f!=null?v(f,e):a==="destroyed"&&w(c)})},{skipInitialization:!0})},[w,e,v]);return}a.displayName=a.name+" [from "+f.id+"]";e=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor,linkAttachment:a.linkAttachment}});g["default"]=e}),98);
__d("FeedComposerCometMentionsPluginForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","FeedComposerCometMentionsViewItemResolver.react","cometMentionsLexicalCreateNodeStrategy","getImplicitMentionsGating","react","useCometMentionsViewListStrategy","useFeedComposerCometMentionsDataSourceResolverConfig","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useState;function a(a){var b=a.editor;a=babelHelpers.objectWithoutPropertiesLoose(a,["editor"]);return b==null?null:i.jsx(l,babelHelpers["extends"]({},a,{editor:b}))}a.displayName=a.name+" [from "+f.id+"]";function l(a){var b=a.composerType,e=a.contextID,f=a.createNodeStrategy;f=f===void 0?c("cometMentionsLexicalCreateNodeStrategy"):f;var g=a.editor;a=a.postID;var h=k(void 0),l=h[0],m=h[1];h=b==="feed";b=c("useFeedComposerCometMentionsDataSourceResolverConfig")({contextID:e,enableTypeSelection:h,implicitMentionsConfig:{isImplicitMentionsEnabled:d("getImplicitMentionsGating").getIsImplicitMentionsEnabledComposer(),matchLimitOverride:d("getImplicitMentionsGating").getIsImplicitMentionsMatchLengthComposerOverride(),typeaheadContext:d("getImplicitMentionsGating").getIsFriendsOnlyImplicitDatasource()?"comet_mention_friends_only":void 0},mentionTypesForNetwork:l,postID:a,shouldBootstrapOnLayoutEffect:!0});e=j(function(a){switch(a.rawData.type){case"MENTION_TYPE_SELECTION":m(a.rawData.typesToShow);return{shouldMentionSelectedEntry:!1};case"MENTION_TYPE_RESET":m(void 0);return{shouldMentionSelectedEntry:!1};default:return{shouldMentionSelectedEntry:!0}}},[]);h=c("useCometMentionsViewListStrategy")({viewItemStrategyRenderer:c("FeedComposerCometMentionsViewItemResolver.react")});return i.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:f,dataSourceResolverConfig:b,editor:g,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),mentionsHandlerForSelectedEntry:e,viewStrategyRenderer:h})}l.displayName=l.name+" [from "+f.id+"]";e=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=e}),98);
__d("extractMessageFromPlainText",["CometLexicalEmojiNode","CometLexicalEntityTextNode","Lexical","LexicalUtils","UnicodeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=[],b="",c=!1,e=d("LexicalUtils").$dfs(),f=e.length;for(var g=0;g<f;g++){var i=e[g].node;if(d("Lexical").$isElementNode(i))continue;var j=i.getTextContent(),k=j.length,l=0;while(!c&&l<=k&&j[l]===" ")l+=1;if(l===k)continue;c=!0;k=j.substring(l);d("CometLexicalEntityTextNode").isCometLexicalEntityTextNode(i)?(a.push({entity:{id:i.getEntity().id},length:(h||(h=d("UnicodeUtils"))).strlen(k),offset:h.strlen(b)}),b+=k):d("CometLexicalEmojiNode").$isEmojiNode(i)?b+=i.getRawText():b+=k}j=b.trim();l=b.length-1;i=a.length;for(k=i-1;k>=0;k-=1){e=a[k];f=e.offset;if(f<=l)break;a.pop()}return{ranges:a,text:j}}g["default"]=a}),98);
__d("composerLexicalMessageFeedTransform",["LexicalText","cr:3325","extractMessageFromPlainText"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e,f){var g=a.lexicalEditor;if(g==null){f(babelHelpers["extends"]({},e));return}g=g.getEditorState().read(function(){if(a.formattingType==="MARKDOWN"&&b("cr:3325")!=null)return b("cr:3325")(d("LexicalText").$rootTextContent().trim());else return c("extractMessageFromPlainText")()});f(babelHelpers["extends"]({},e,{formatting:a.formattingType==="MARKDOWN"?"MARKDOWN":void 0,message:g}))}g["default"]=a}),98);